@0
MOV RIGHT, ACC
JEZ RETR
PROPAGATE:
SAV
MOV RIGHT, ACC
JEZ RETR
MOV ACC, DOWN
SWP
JMP PROPAGATE
RETR:
MOV 0, DOWN
SWP
MOV ACC, DOWN

@1
SAV
MOV UP, ACC
JEZ RETR
MOV ACC, LEFT
JRO -4
RETR:
SWP
JNZ PLOOP
MOV -1, LEFT
PLOOP:
MOV 6, ACC
LOOP:
MOV 0, LEFT
SUB 1
JGZ LOOP

@2


@3
MOV UP, ACC
JEZ RETR
PROPAGATE:
SAV
MOV UP, ACC
JEZ RETR
MOV ACC, RIGHT
SWP
JMP PROPAGATE
RETR:
MOV 0, RIGHT
SWP
MOV ACC, RIGHT

@4
MOV LEFT, ACC
JEZ RETR
PROPAGATE:
SAV
MOV LEFT, ACC
JEZ RETR
MOV ACC, RIGHT
SWP
JMP PROPAGATE
RETR:
MOV 0, RIGHT
SWP
MOV ACC, RIGHT

@5
MOV LEFT, ACC
JEZ RETR
PROPAGATE:
SAV
MOV LEFT, ACC
JEZ RETR
MOV ACC, RIGHT
SWP
JMP PROPAGATE
RETR:
MOV 0, RIGHT
SWP
MOV ACC, RIGHT

@6
MOV LEFT, ACC
JEZ RETR
PROPAGATE:
SAV
MOV LEFT, ACC
JEZ RETR
MOV ACC, DOWN
SWP
JMP PROPAGATE
RETR:
MOV 0, DOWN
SWP
MOV ACC, DOWN

@7
JMP COLLECT
MOV RIGHT, ACC
JEZ STARTCOL
MOV ACC, DOWN
JRO -3
STARTCOL:
MOV 0, DOWN
COLLECT:
MOV RIGHT, ACC
JEZ COLLECT
JLZ DISCARD
MOV ACC, DOWN
JRO -9
DISCARD:
JRO -10

@8
MOV UP, ACC
JEZ RETR
PROPAGATE:
SAV
MOV UP, ACC
JEZ RETR
MOV ACC, LEFT
SWP
JMP PROPAGATE
RETR:
#MOV 0, LEFT
SWP
MOV ACC, LEFT
